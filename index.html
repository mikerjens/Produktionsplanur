<!doctype html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>KRENKARIRNIR Â· Produktionsportal</title>
<style>
  :root{
    --bg:#0f1115;
    --card:#171922;
    --muted:#9aa3b2;
    --text:#e8ecf1;
    --brand:#7dd3fc;
    --brand2:#a78bfa;
    --border:#262a36;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    background:linear-gradient(180deg,#0d0f14 0%,#11141b 100%);
    color:var(--text);
    font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  }
  header{
    display:flex;
    align-items:center;
    gap:.75rem;
    padding:16px 20px;
    border-bottom:1px solid var(--border);
    position:sticky;
    top:0;
    background:#0f1115cc;
    backdrop-filter:blur(6px);
    z-index:10;
  }
  .logo{
    display:flex;
    align-items:center;
    gap:.5rem;
    cursor:pointer;
    text-decoration:none;
    color:var(--text);
  }
  .logo .mark{
    width:32px;
    height:32px;
    border-radius:10px;
    background:conic-gradient(from 210deg,var(--brand),var(--brand2));
  }
  .logo h1{
    font-size:18px;
    letter-spacing:.4px;
    margin:0;
    font-weight:700;
  }
  .wrap{
    display:grid;
    grid-template-columns:320px 1fr 360px;
    gap:16px;
    padding:16px;
  }
  .card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:16px;
    box-shadow:0 6px 24px rgba(0,0,0,.25);
  }
  .pane{padding:16px}
  h2{margin:.25rem 0 1rem 0;font-size:18px}
  h3{margin:1rem 0 .5rem 0;font-size:16px}
  label{display:block;margin-bottom:.5rem;font-size:13px;color:var(--muted)}
  select,input[type="search"]{
    width:100%;
    padding:12px;
    border-radius:12px;
    background:#0f1218;
    border:1px solid var(--border);
    color:var(--text);
  }
  .tag{
    font-size:12px;
    padding:2px 8px;
    border-radius:999px;
    border:1px solid var(--border);
    color:var(--muted);
  }
  .list{
    display:flex;
    flex-direction:column;
    gap:8px;
    margin-top:12px;
  }
  .item{
    padding:12px;
    border:1px solid var(--border);
    border-radius:12px;
    background:#131623;
    display:flex;
    justify-content:space-between;
    align-items:center;
    cursor:pointer;
  }
  .item:hover{
    border-color:#2f3444;
    transform:translateY(-1px);
  }
  .muted{color:var(--muted)}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .program{display:flex;flex-direction:column;gap:8px}
  .step{
    display:flex;
    gap:10px;
    align-items:flex-start;
    background:#121622;
    border:1px dashed #293042;
    padding:10px;
    border-radius:10px;
  }
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{
    padding:6px 10px;
    border-radius:999px;
    border:1px solid var(--border);
    background:#0f1218;
    font-size:12px;
  }
  .pill{
    padding:4px 10px;
    border-radius:999px;
    background:#0f1218;
    border:1px solid var(--border);
    font-size:12px;
  }
  .toolbar{display:flex;gap:8px;flex-wrap:wrap}
  button{
    cursor:pointer;
    border:1px solid var(--border);
    background:#10131a;
    color:var(--text);
    padding:10px 12px;
    border-radius:12px;
  }
  button.primary{
    border-color:transparent;
    background:linear-gradient(135deg,var(--brand),var(--brand2));
  }
  .section{
    border-top:1px solid var(--border);
    margin-top:12px;
    padding-top:12px;
  }
  .empty{padding:16px;text-align:center;color:var(--muted)}
  .kicker{
    font-size:12px;
    color:var(--muted);
    letter-spacing:.3px;
    text-transform:uppercase;
  }
  .stack{display:flex;flex-direction:column;gap:10px}
  .two{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
  .daybtn{width:100%;text-align:left}
  .contact-row{
    display:flex;
    justify-content:space-between;
    gap:8px;
    padding:10px;
    border:1px solid var(--border);
    border-radius:10px;
    background:#101421;
  }
  .scroll{max-height:62vh;overflow:auto;padding-right:6px}
  .search{display:flex;gap:8px;margin-top:8px}
  .footer{
    padding:10px 16px;
    color:var(--muted);
    font-size:12px;
    text-align:center;
  }
  a{color:#a5b4fc}
  @media (max-width:1100px){
    .wrap{grid-template-columns:1fr;}
    .right{order:3}
    .center{order:2}
    .left{order:1}
  }
  /* Modals */
  .modal{
    display:none;
    position:fixed;
    inset:0;
    background:#0009;
    z-index:50;
    align-items:center;
    justify-content:center;
  }
  .modal .box{
    width:min(1000px,94vw);
    max-height:86vh;
    overflow:auto;
  }
  .modal .hdr{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    position:sticky;
    top:0;
    background:var(--card);
    padding-bottom:8px;
    margin-bottom:8px;
  }
  /* Print */
  @media print{
    body{background:white;color:black}
    header,.left,.right,.footer,#contactsModal{display:none !important}
    .center{border:none;box-shadow:none}
    #callSheetsModal{display:block;background:none}
    #callSheetsModal .box{width:100%;max-height:none;overflow:visible}
    #callSheetsList .sheet{page-break-after:always;border:1px solid #0002}
    .sheet .program .step{border:1px solid #0001;background:#fff}
    a{color:inherit}
  }
</style>
</head>
<body>
<header>
  <a class="logo" onclick="resetUI()" title="Til start">
    <span class="mark"></span>
    <h1>KRENKARIRNIR Â· Produktionsportal</h1>
  </a>
</header>

<div class="wrap">
  <!-- VENSTRE -->
  <div class="card pane left">
    <div class="toolbar">
      <button class="primary" onclick="openContacts()">Kontakter</button>
      <button onclick="openCallSheets()">Call sheets</button>
      <button onclick="window.print()">Print</button>
    </div>

    <div class="section">
      <label for="nameSelect">VÃ¦lg dit navn</label>
      <select id="nameSelect" onchange="renderMySchedule()">
        <option value="">â€” VÃ¦lg person â€”</option>
      </select>
    </div>

    <div class="section">
      <div class="kicker">Mit skema</div>
      <div id="mySchedule" class="stack"></div>
    </div>
  </div>

  <!-- MIDTEN -->
  <div class="card pane center">
    <div class="two">
      <div>
        <div class="kicker">Valgt dag</div>
        <h2 id="dayTitle">VÃ¦lg en dag i hÃ¸jre side</h2>
        <div id="dayMeta" class="chips"></div>

        <div class="section">
          <h3>Program</h3>
          <div id="program" class="program"></div>
        </div>

        <div class="section grid">
          <div>
            <h3>Skuespillere</h3>
            <div id="cast" class="chips"></div>
          </div>
          <div>
            <h3>Crew</h3>
            <div id="crew" class="chips"></div>
          </div>
        </div>

        <div class="section">
          <h3>Scener (kort beskrivelse)</h3>
          <div id="scenes" class="program"></div>
        </div>
      </div>

      <div>
        <h3>Call sheet</h3>
        <div id="callInfo" class="stack">
          <div class="muted">Ingen fil knyttet.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- HÃ˜JRE -->
  <div class="card pane right">
    <div class="kicker">Produktionsdage</div>
    <div class="search">
      <input id="daySearch" type="search" placeholder="SÃ¸g dato, sted, titelâ€¦" oninput="renderDayList()">
    </div>
    <div id="dayList" class="list scroll"></div>
  </div>
</div>

<!-- Kontakter modal -->
<div id="contactsModal" class="modal">
  <div class="card pane box">
    <div class="hdr">
      <h2 style="margin:0">Kontakter (kommende optagedage)</h2>
      <div class="toolbar"><button onclick="closeContacts()">Luk</button></div>
    </div>
    <div class="search">
      <input id="contactSearch" type="search" placeholder="SÃ¸g navn, rolle, e-mail, tlfâ€¦" oninput="renderContacts()">
    </div>
    <div id="contactsList" class="stack section"></div>
  </div>
</div>

<!-- Call sheets modal -->
<div id="callSheetsModal" class="modal">
  <div class="card pane box">
    <div class="hdr">
      <h2 style="margin:0">Call sheets Â· fuld dagsplan pr. dag</h2>
      <div class="toolbar">
        <button onclick="window.print()">Print</button>
        <button onclick="closeCallSheets()">Luk</button>
      </div>
    </div>
    <div class="search">
      <input id="callSearch" type="search" placeholder="SÃ¸g (dato, titel, location, personâ€¦)" oninput="renderCallSheets()">
    </div>
    <div id="callSheetsList" class="stack section"></div>
  </div>
</div>

<div class="footer">Version: 2.7 Â· Kilde: Produktionsplan</div>

<script>
/* ======================== DATA â€“ v2.7 ======================== */
/* Kommende optagedage (completed-dage ligger kun i dokumentet) */
const DAYS = [
  /* 22.11 Terapilokale â€“ Session 05 start */
  {
    id:"2025-11-22",
    title:"LÃ¸rdag 22. nov. Â· Terapilokale â€“ Session 05",
    location:"Aulan, Studenterskolen i HoydÃ¸lum",
    program:[
      ["06:00","Make-up mÃ¸der (Julia). Props & design mÃ¸der (Anna Kristin). Producer mÃ¸der (Michael)."],
      ["06:00","Ruth mÃ¸der (Elsa Maria) og klargÃ¸res til optagelser."],
      ["06:40","Johanna mÃ¸der (Esther Ã¡ Fjallinum)."],
      ["07:00","Morgenmad Â· kaffe/te og rundstykker pÃ¥ buffet."],
      ["07:15","LÃ­ggjas mÃ¸der (BjÃ¸rn Simonsen Ulvedal)."],
      ["07:25","Danny mÃ¸der (Marius DC)."],
      ["07:35","HÃ¸gni mÃ¸der (HjÃ¡lmar Dam)."],
      ["07:45","Holgar mÃ¸der (Hans TÃ³rgarÃ°)."],
      ["08:00","Filmoptagelse starter i terapilokalet."],
      ["09:00","Make-up fÃ¥r fri (Julia Jacobsen)."],
      ["10:30","Pause / kaffe og sÃ¸dt."],
      ["10:45","Optagelser starter igen."],
      ["12:20","Frokostpause."],
      ["13:10","Optagelser fortsÃ¦tter."],
      ["13:30","Props & design fÃ¥r fri (Anna Kristin)."],
      ["14:45","Pause / kaffe."],
      ["15:10","Optagelser pÃ¥begyndes igen."],
      ["17:00","SLUT for dagen."]
    ],
    cast:[
      "Esther Ã¡ Fjallinum",
      "Hans TÃ³rgarÃ°",
      "Elsa Maria MagnusardÃ³ttir Olsen",
      "HjÃ¡lmar Dam",
      "Marius DC",
      "BjÃ¸rn Simonsen Ulvedal"
    ],
    crew:[
      "Michael Koba",
      "Thomas Koba",
      "JÃ³nfinn Stenberg",
      "Hans Petur Hansen",
      "Anna Kristin BÃ¦k",
      "HÃ¸gni Fagraberg",
      "Julia Jacobsen"
    ],
    scenes:[
      "Terapisession 05 â€“ start pÃ¥ Ruths monolog og gruppeterapi.",
      "Konflikt bygges op mellem deltagerne i gruppen.",
      "Holgar begynder at skubbe til samtalen og magtbalancen."
    ],
    call:null
  },

  /* 23.11 Terapilokale â€“ Session 05 fortsat (mindst fra beskrivelsen) */
  {
    id:"2025-11-23",
    title:"SÃ¸ndag 23. nov. Â· Terapilokale (fortsat)",
    location:"Aulan, Studenterskolen i HoydÃ¸lum",
    program:[
      ["08:00","Optagelser fortsÃ¦tter pÃ¥ Session 05."],
      ["12:30","Frokostpause."],
      ["13:15","Optagelser fortsÃ¦tter â€“ inserts og reaktioner."],
      ["18:00","SLUT (forventet)."]
    ],
    cast:[
      "Esther Ã¡ Fjallinum",
      "Hans TÃ³rgarÃ°",
      "Elsa Maria MagnusardÃ³ttir Olsen",
      "HjÃ¡lmar Dam",
      "Marius DC",
      "BjÃ¸rn Simonsen Ulvedal"
    ],
    crew:[
      "Michael Koba",
      "Thomas Koba",
      "JÃ³nfinn Stenberg",
      "Hans Petur Hansen",
      "Anna Kristin BÃ¦k",
      "HÃ¸gni Fagraberg",
      "Julia Jacobsen"
    ],
    scenes:[
      "FortsÃ¦ttelse og afslutning pÃ¥ Session 05.",
      "Konfrontation mellem Johanna og Holgar om magt og ansvar.",
      "Samlet konklusion i gruppen og reaktionsbilleder."
    ],
    call:null
  },

  /* 01.12 Parkeringsscene */
  {
    id:"2025-12-01",
    title:"Mandag 1. dec. Â· â€œParkeringssceneâ€",
    location:"Studenterskolen i HoydÃ¸lum",
    program:[
      ["08:00","Crew mÃ¸der (Thomas, Anna Kristin, Michael)."],
      ["08:00","Make-up (Julia) gÃ¸r skuespillere klar."],
      ["09:00","Skuespillere mÃ¸der (Hans TÃ³rgarÃ°, Esther Ã¡ Fjallinum)."],
      ["10:00","Optagelse af parkeringsscene starter."],
      ["11:00","Hans (Holgar) fÃ¥r fri."],
      ["14:00","Esther (Johanna) fÃ¥r fri."],
      ["14:15","Crew fÃ¥r fri."]
    ],
    cast:[
      "Esther Ã¡ Fjallinum",
      "Hans TÃ³rgarÃ°"
    ],
    crew:[
      "Michael Koba",
      "Thomas Koba",
      "Anna Kristin BÃ¦k",
      "Julia Jacobsen"
    ],
    scenes:[
      "Parkeringsproblemer â€“ Holgar stjÃ¦ler parkeringspladsen fra Johanna.",
      "Bilbilleder med Johanna der sÃ¦tter sig ind i bilen og kÃ¸rer.",
      "KÃ¸rsel pÃ¥ FÃ¦rÃ¸erne og ind mod TÃ³rshavn."
    ],
    call:null
  },

  /* 08.12 Flashback 3B â€“ kaffemaskine scene */
  {
    id:"2025-12-08",
    title:"Mandag 8. dec. Â· â€œFlashback 3B â€“ kaffemaskine sceneâ€",
    location:"Tjarnir (Presselogen + mÃ¸derum)",
    program:[
      ["15:00","Film crew gÃ¸r kaffemaskine-scenen i Presselogen klar (Hans Petur, Thomas, Michael)."],
      ["15:00","Lyd, stylist & make-up og props/design mÃ¸der (Ronni, Julia, Anna Kristin)."],
      ["16:00","2 statister og 1 hovedskuespiller mÃ¸der til make-up og tÃ¸j (Helena, ukendt kvindelig statist, HjÃ¡lmar)."],
      ["17:00","Optagelse starter."],
      ["20:00","SLUT."]
    ],
    cast:[
      "Helena",
      "Ukendt kvindelig statist",
      "HjÃ¡lmar Dam"
    ],
    crew:[
      "Michael Koba",
      "Thomas Koba",
      "JÃ³nfinn Stenberg",
      "Anna Kristin BÃ¦k",
      "Ronni Poulsen",
      "Julia Jacobsen"
    ],
    scenes:[
      "Kantinen hos HÃ¸gni â€“ kaffemaskine-scene med bemÃ¦rkninger og stemning.",
      "MÃ¸derum: HR-samtale om dickpics, som ender med fyring."
    ],
    call:null
  }
];

/* Kontakter â€“ kun personer der er med pÃ¥ de kommende optagedage */
const CONTACTS = {
  /* Crew */
  "Michael Koba":      {role:"Producer",                email:"mk@fixer.fo",                    phone:"591011"},
  "Thomas Koba":       {role:"InstruktÃ¸r / A-foto",     email:"thomas@kovboyfilm.com",          phone:"213457"},
  "JÃ³nfinn Stenberg":  {role:"B-fotograf",              email:"jonfinn_stenberg@hotmail.com",   phone:"296682"},
  "Hans Petur Hansen": {role:"Lys",                     email:"hph@kvf.fo",                      phone:"296652"},
  "Anna Kristin BÃ¦k":  {role:"Props & design",          email:"kristin.baek@gmail.com",          phone:"265180"},
  "HÃ¸gni Fagraberg":   {role:"Lyd",                     email:"h.fagraberg@gmail.com"},
  "Ronni Poulsen":     {role:"Lyd",                     email:"ronni.poulsen@gmail.com",         phone:"794141"},
  "Julia Jacobsen":    {role:"Make-up",                 email:"juliajacobsen@outlook.com",       phone:"251175"},

  /* Skuespillere / statister */
  "Esther Ã¡ Fjallinum":{
    role:"Skuespiller Â· Johanna, psyk. terapeut",
    email:"estherafjallinum@gmail.com",
    phone:"265069"
  },
  "Hans TÃ³rgarÃ°":{
    role:"Skuespiller Â· Holgar, intellektuel observatÃ¸r",
    email:"hanstorgar@gmail.com",
    phone:"229342"
  },
  "Elsa Maria MagnusardÃ³ttir Olsen":{
    role:"Skuespiller Â· Ruth, kvinnelig chef (krÃ¦nker)",
    email:"emmocontact@gmail.com",
    phone:"507104"
  },
  "HjÃ¡lmar Dam":{
    role:"Skuespiller Â· HÃ¸gni Nielsen, business man (krÃ¦nker)",
    email:"helmetsdam@gmail.com",
    phone:"512449"
  },
  "Marius DC":{
    role:"Skuespiller Â· Danny Bergsson, den unge (krÃ¦nker)",
    email:"mariusdamchr@gmail.com",
    phone:"582161"
  },
  "BjÃ¸rn Simonsen Ulvedal":{
    role:"Skuespiller Â· LÃ­ggjas Dahl, i rullestol (krÃ¦nker)",
    email:"bjorn.simonsen@gmail.com",
    phone:"222867"
  },
  "Helena":{
    role:"Statist Â· Flashback, girl 1",
    email:"helena.h.jorgensen@gmail.com",
    phone:"274450"
  },
  "Ukendt kvindelig statist":{
    role:"Statist Â· Flashback, girl 2"
  }
};

/* Udledte navne til dropdown */
const PEOPLE = Array.from(new Set([
  ...Object.keys(CONTACTS),
  ...DAYS.flatMap(d => [...(d.cast||[]), ...(d.crew||[])])
])).sort((a,b)=>a.localeCompare(b,"da"));

/* ======================== UI/STATE HELPERS ======================== */
const el = id => document.getElementById(id);

document.addEventListener("DOMContentLoaded", init);

function init(){
  const sel = el("nameSelect");
  PEOPLE.forEach(p=>{
    const o = document.createElement("option");
    o.value = p;
    o.textContent = p;
    sel.appendChild(o);
  });
  renderDayList();
  renderMySchedule();
}

function resetUI(){
  el("nameSelect").value = "";
  renderMySchedule();
  el("dayTitle").textContent = "VÃ¦lg en dag i hÃ¸jre side";
  el("dayMeta").innerHTML = "";
  el("program").innerHTML = "";
  el("scenes").innerHTML = "";
  el("cast").innerHTML = "";
  el("crew").innerHTML = "";
  el("callInfo").innerHTML = '<div class="muted">Ingen fil knyttet.</div>';
  renderDayList();
  window.scrollTo({top:0,behavior:"smooth"});
}

/* HÃ¸jre kolonne â€“ dagsliste */
function renderDayList(){
  const q = (el("daySearch")?.value || "").toLowerCase();
  const list = el("dayList");
  list.innerHTML = "";
  [...DAYS].sort((a,b)=>a.id.localeCompare(b.id)).forEach(d=>{
    const hay = [
      d.title,
      d.location,
      ...(d.cast||[]),
      ...(d.crew||[]),
      ...(d.program?.flat()||[]),
      (d.scenes||[]).join(" ")
    ].join(" ").toLowerCase();
    if(q && !hay.includes(q)) return;

    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <div>
        <div><strong>${d.title}</strong></div>
        <div class="muted">${d.location}</div>
      </div>
      <span class="tag">Se program</span>
    `;
    div.onclick = () => showDay(d.id);
    list.appendChild(div);
  });

  if(!list.children.length){
    list.innerHTML = '<div class="empty">Ingen dage matcher din sÃ¸gning.</div>';
  }
}

/* Midterkolonne â€“ valgt dag */
function showDay(dayId){
  const d = DAYS.find(x => x.id === dayId);
  if(!d) return;

  el("dayTitle").textContent = d.title;
  el("dayMeta").innerHTML = `
    <span class="pill">Location: ${d.location}</span>
    <span class="pill">Skuespillere: ${d.cast?.length || 0}</span>
    <span class="pill">Crew: ${d.crew?.length || 0}</span>
  `;

  const prog = el("program");
  prog.innerHTML = "";
  if(!d.program?.length){
    prog.innerHTML = '<div class="empty">Intet program registreret.</div>';
  } else {
    d.program.forEach(([t,desc])=>{
      const row = document.createElement("div");
      row.className = "step";
      row.innerHTML = `<time class="tag">${t}</time><div>${desc}</div>`;
      prog.appendChild(row);
    });
  }

  const sc = el("scenes");
  sc.innerHTML = "";
  if(!d.scenes?.length){
    sc.innerHTML = '<div class="muted">â€”</div>';
  } else {
    d.scenes.forEach((s,i)=>{
      const div = document.createElement("div");
      div.className = "step";
      div.innerHTML = `<span class="tag">Scene ${String(i+1).padStart(2,"0")}</span><div>${s}</div>`;
      sc.appendChild(div);
    });
  }

  el("cast").innerHTML = d.cast?.length
    ? d.cast.map(n=>`<span class="chip" title="${contactTip(n)}">${n}</span>`).join("")
    : '<div class="muted">â€“</div>';

  el("crew").innerHTML = d.crew?.length
    ? d.crew.map(n=>`<span class="chip" title="${contactTip(n)}">${n}</span>`).join("")
    : '<div class="muted">â€“</div>';

  el("callInfo").innerHTML = d.call
    ? `<a href="${d.call}" target="_blank" download>ðŸ“„ Ã…bn call sheet</a>`
    : '<div class="muted">Ingen fil knyttet.</div>';

  if(window.innerWidth < 1100){
    document.querySelector(".center").scrollIntoView({behavior:"smooth"});
  }
}

/* Venstre kolonne â€“ Mit skema */
function renderMySchedule(){
  const name = el("nameSelect").value;
  const box = el("mySchedule");
  box.innerHTML = "";

  if(!name){
    box.innerHTML = '<div class="empty">VÃ¦lg dit navn for at se dine arbejdsdage.</div>';
    return;
  }

  const mine = [...DAYS]
    .sort((a,b)=>a.id.localeCompare(b.id))
    .filter(d => (d.cast||[]).includes(name) || (d.crew||[]).includes(name));

  if(!mine.length){
    box.innerHTML = '<div class="empty">Ingen dage fundet for denne person.</div>';
    return;
  }

  mine.forEach(d=>{
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <div>
        <div><strong>${d.title}</strong></div>
        <div class="muted">${d.location}</div>
      </div>
      <button class="daybtn">Ã…bn</button>
    `;
    div.onclick = () => showDay(d.id);
    box.appendChild(div);
  });
}

/* Kontakter */
function openContacts(){
  el("contactsModal").style.display = "flex";
  renderContacts();
}
function closeContacts(){
  el("contactsModal").style.display = "none";
}
function renderContacts(){
  const q = (el("contactSearch")?.value || "").toLowerCase();
  const root = el("contactsList");
  root.innerHTML = "";

  const rows = Object.entries(CONTACTS)
    .filter(([name,c])=>{
      const hay = [name, c.role||"", c.email||"", c.phone||""].join(" ").toLowerCase();
      return !q || hay.includes(q);
    })
    .sort((a,b)=>a[0].localeCompare(b[0],"da"));

  if(!rows.length){
    root.innerHTML = '<div class="empty">Ingen kontakter matcher.</div>';
    return;
  }

  rows.forEach(([name,c])=>{
    const div = document.createElement("div");
    div.className = "contact-row";
    const role = c.role ? `<div class="muted">${c.role}</div>` : "";
    const mail = c.email ? `<a href="mailto:${c.email}">${c.email}</a>` : '<span class="muted">â€”</span>';
    const tel  = c.phone ? `<a href="tel:${c.phone}">${c.phone}</a>`   : '<span class="muted">â€”</span>';
    div.innerHTML = `
      <div>
        <div><strong>${name}</strong></div>
        ${role}
      </div>
      <div style="text-align:right">
        <div>${mail}</div>
        <div>${tel}</div>
      </div>
    `;
    root.appendChild(div);
  });
}

/* Call sheets â€“ samlet liste */
function openCallSheets(){
  el("callSheetsModal").style.display = "flex";
  renderCallSheets();
}
function closeCallSheets(){
  el("callSheetsModal").style.display = "none";
}
function renderCallSheets(){
  const q = (el("callSearch")?.value || "").toLowerCase();
  const root = document.getElementById("callSheetsList");
  root.innerHTML = "";

  const days = [...DAYS].sort((a,b)=>a.id.localeCompare(b.id));
  days.forEach(d=>{
    const hay = [
      d.id,
      d.title,
      d.location,
      ...(d.scenes||[]),
      ...(d.cast||[]),
      ...(d.crew||[]),
      ...(d.program?.flat()||[])
    ].join(" ").toLowerCase();
    if(q && !hay.includes(q)) return;

    const sheet = document.createElement("div");
    sheet.className = "sheet";
    sheet.style.cssText = "border:1px solid var(--border);border-radius:12px;padding:16px;background:#111521";
    sheet.innerHTML = `
      <div class="kicker">${d.id}</div>
      <h2 style="margin:.25rem 0 0 0">${d.title}</h2>
      <div class="chips" style="margin:.5rem 0 1rem 0">
        <span class="pill">Location: ${d.location}</span>
        <span class="pill">Scener: ${d.scenes?.length || 0}</span>
        <span class="pill">Skuespillere: ${d.cast?.length || 0}</span>
        <span class="pill">Crew: ${d.crew?.length || 0}</span>
        ${d.call ? `<a class="pill" href="${d.call}" target="_blank">Eksternt call sheet</a>` : `<span class="pill">Ingen ekstern fil</span>`}
      </div>
      <div class="section">
        <h3>Program</h3>
        <div class="program">
          ${
            (d.program && d.program.length)
            ? d.program.map(([t,desc])=>`
              <div class="step">
                <time class="tag">${t}</time>
                <div>${desc}</div>
              </div>`).join("")
            : '<div class="muted">Intet program registreret.</div>'
          }
        </div>
      </div>
      <div class="section">
        <h3>Scener (kort beskrivelse)</h3>
        <div class="program">
          ${
            (d.scenes && d.scenes.length)
            ? d.scenes.map((s,i)=>`
              <div class="step">
                <span class="tag">Scene ${String(i+1).padStart(2,"0")}</span>
                <div>${s}</div>
              </div>`).join("")
            : '<div class="muted">â€”</div>'
          }
        </div>
      </div>
      <div class="section grid">
        <div>
          <h3>Skuespillere</h3>
          <div class="chips">${
            d.cast?.length
              ? d.cast.map(n=>`<span class="chip" title="${contactTip(n)}">${n}</span>`).join("")
              : '<div class="muted">â€“</div>'
          }</div>
        </div>
        <div>
          <h3>Crew</h3>
          <div class="chips">${
            d.crew?.length
              ? d.crew.map(n=>`<span class="chip" title="${contactTip(n)}">${n}</span>`).join("")
              : '<div class="muted">â€“</div>'
          }</div>
        </div>
      </div>
    `;
    root.appendChild(sheet);
  });

  if(!root.children.length){
    root.innerHTML = '<div class="empty">Ingen dage matcher din sÃ¸gning.</div>';
  }
}

/* Utils */
function contactTip(name){
  const c = CONTACTS[name];
  if(!c) return "";
  return [c.role, c.email, c.phone].filter(Boolean).join(" Â· ");
}
</script>
</body>
</html>
