<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>KRENKARIRNIR Â· Produktionsportal</title>
<style>
  :root{ --bg:#0f1115; --card:#171922; --muted:#9aa3b2; --text:#e8ecf1; --brand:#7dd3fc; --brand2:#a78bfa; --border:#262a36; }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#0d0f14 0%,#11141b 100%);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  header{display:flex;align-items:center;gap:.75rem;padding:16px 20px;border-bottom:1px solid var(--border);position:sticky;top:0;background:#0f1115cc;backdrop-filter: blur(6px);z-index:10}
  .logo{display:flex;align-items:center;gap:.5rem;cursor:pointer;text-decoration:none;color:var(--text)}
  .logo .mark{width:32px;height:32px;border-radius:10px;background:conic-gradient(from 210deg,var(--brand),var(--brand2))}
  .logo h1{font-size:18px;letter-spacing:.4px;margin:0;font-weight:700}
  .wrap{display:grid;grid-template-columns:320px 1fr 360px;gap:16px;padding:16px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .pane{padding:16px}
  h2{margin:.25rem 0 1rem 0;font-size:18px}
  h3{margin:1rem 0 .5rem 0;font-size:16px}
  label{display:block;margin-bottom:.5rem;font-size:13px;color:var(--muted)}
  select,input[type="search"]{width:100%;padding:12px;border-radius:12px;background:#0f1218;border:1px solid var(--border);color:var(--text);outline:none}
  .tag{font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid var(--border);color:var(--muted)}
  .list{display:flex;flex-direction:column;gap:8px;margin-top:12px}
  .item{padding:12px;border:1px solid var(--border);border-radius:12px;background:#131623;display:flex;justify-content:space-between;align-items:center;cursor:pointer}
  .item:hover{border-color:#2f3444;transform:translateY(-1px)}
  .muted{color:var(--muted)}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .program{display:flex;flex-direction:column;gap:8px}
  .step{display:flex;gap:10px;align-items:flex-start;background:#121622;border:1px dashed #293042;padding:10px;border-radius:10px}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:#0f1218;font-size:12px}
  .pill{padding:4px 10px;border-radius:999px;background:#0f1218;border:1px solid var(--border);font-size:12px}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap}
  button{cursor:pointer;border:1px solid var(--border);background:#10131a;color:var(--text);padding:10px 12px;border-radius:12px}
  button.primary{border-color:transparent;background:linear-gradient(135deg,var(--brand),var(--brand2))}
  .section{border-top:1px solid var(--border);margin-top:12px;padding-top:12px}
  .empty{padding:16px;text-align:center;color:var(--muted)}
  .kicker{font-size:12px;color:var(--muted);letter-spacing:.3px;text-transform:uppercase}
  .stack{display:flex;flex-direction:column;gap:10px}
  .two{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
  .daybtn{width:100%;text-align:left}
  .contact-row{display:flex;justify-content:space-between;gap:8px;padding:10px;border:1px solid var(--border);border-radius:10px;background:#101421}
  .scroll{max-height:62vh;overflow:auto;padding-right:6px}
  .search{display:flex;gap:8px;margin-top:8px}
  .footer{padding:10px 16px;color:var(--muted);font-size:12px;text-align:center}
  a{color:#a5b4fc}
  @media (max-width:1100px){ .wrap{grid-template-columns:1fr;}.right{order:3}.center{order:2}.left{order:1}}
  .modal{display:none;position:fixed;inset:0;background:#0009;z-index:50;align-items:center;justify-content:center}
  .modal .box{width:min(1000px,94vw);max-height:86vh;overflow:auto}
  .modal .hdr{display:flex;justify-content:space-between;align-items:center;gap:8px;position:sticky;top:0;background:var(--card);padding-bottom:8px;margin-bottom:8px}
  @media print{
    body{background:white;color:black}
    header,.left,.right,.footer,#contactsModal{display:none !important}
    .center{border:none;box-shadow:none}
    #callSheetsModal{display:block;background:none}
    #callSheetsModal .box{width:100%;max-height:none;overflow:visible}
    #callSheetsList .sheet{page-break-after:always;border:1px solid #0002}
    .sheet .program .step{border:1px solid #0001;background:#fff}
    a{color:inherit}
  }
</style>
</head>
<body>
<header>
  <a class="logo" onclick="resetUI()" title="Til start">
    <span class="mark"></span><h1>KRENKARIRNIR Â· Produktionsportal</h1>
  </a>
</header>

<div class="wrap">
  <!-- VENSTRE -->
  <div class="card pane left">
    <div class="toolbar">
      <button class="primary" onclick="openContacts()">Kontakter</button>
      <button onclick="openCallSheets()">Call sheets</button>
      <button onclick="window.print()">Print</button>
    </div>
    <div class="section">
      <label for="nameSelect">VÃ¦lg dit navn</label>
      <select id="nameSelect" onchange="renderMySchedule()">
        <option value="">â€” VÃ¦lg person â€”</option>
      </select>
    </div>
    <div class="section">
      <div class="kicker">Mit skema</div>
      <div id="mySchedule" class="stack"></div>
    </div>
  </div>

  <!-- MIDTEN -->
  <div class="card pane center">
    <div class="two">
      <div>
        <div class="kicker">Valgt dag</div>
        <h2 id="dayTitle">VÃ¦lg en dag i hÃ¸jre side</h2>
        <div id="dayMeta" class="chips"></div>
        <div class="section">
          <h3>Program</h3>
          <div id="program" class="program"></div>
        </div>
        <div class="section">
          <h3>Scener</h3>
          <div id="scenes" class="stack"></div>
        </div>
        <div class="section grid">
          <div><h3>Skuespillere</h3><div id="cast" class="chips"></div></div>
          <div><h3>Crew</h3><div id="crew" class="chips"></div></div>
        </div>
      </div>
      <div>
        <h3>Call sheet</h3>
        <div id="callInfo" class="stack"><div class="muted">Ingen fil knyttet.</div></div>
      </div>
    </div>
  </div>

  <!-- HÃ˜JRE -->
  <div class="card pane right">
    <div class="kicker">Produktionsdage</div>
    <div class="search"><input id="daySearch" type="search" placeholder="SÃ¸g dato, sted, titelâ€¦" oninput="renderDayList()"></div>
    <div id="dayList" class="list scroll"></div>
  </div>
</div>

<!-- Kontakter modal -->
<div id="contactsModal" class="modal">
  <div class="card pane box">
    <div class="hdr"><h2 style="margin:0">Kontakter</h2><div class="toolbar"><button onclick="closeContacts()">Luk</button></div></div>
    <div class="search"><input id="contactSearch" type="search" placeholder="SÃ¸g navn, rolle, e-mail, tlfâ€¦" oninput="renderContacts()"></div>
    <div id="contactsList" class="stack section"></div>
  </div>
</div>

<!-- Call sheets modal -->
<div id="callSheetsModal" class="modal">
  <div class="card pane box">
    <div class="hdr"><h2 style="margin:0">Call sheets Â· fuld dagsplan pr. dag</h2><div class="toolbar"><button onclick="window.print()">Print</button><button onclick="closeCallSheets()">Luk</button></div></div>
    <div class="search"><input id="callSearch" type="search" placeholder="SÃ¸g (dato, titel, location, personâ€¦)" oninput="renderCallSheets()"></div>
    <div id="callSheetsList" class="stack section"></div>
  </div>
</div>

<div class="footer">Version: 1.8 Â· Kilde: Produktionsplan v1.8 (+ scener)</div>

<script>
/* -------------------- DATA (v1.8 â€“ COMPLETED udeladt) -------------------- */
const DAYS = [
  /* 13.10 Flashback 3A â€“ Advokat scene */
  {
    id:"2025-10-13",
    title:'Mandag 13. okt. Â· â€œFlashback 3A â€“ Advokat sceneâ€',
    location:'Tjarnir',
    program:[
      ["15:00","Film crew gÃ¸r advokatscenen klar (Hans Petur, Thomas, JÃ³nfinn, Ronni, Michael)"],
      ["16:00","Props & design + make-up (Anna Kristin forbereder tÃ¸j, Julia make-up)"],
      ["16:00","Statister + hovedskuespiller til make-up/tÃ¸j (TÃ³rur viÃ° Ãir, AstriÃ° GullborgardÃ³ttir, HjÃ¡lmar Dam)"],
      ["17:00","Optagelse starter"],
      ["19:00","SLUT"],
    ],
    scenes:[
      // Ingen decideret sceneliste fundet i kildedok â€“ udfyldes nÃ¥r du Ã¸nsker.
    ],
    cast:["TÃ³rur viÃ° Ãir","AstriÃ° GullborgardÃ³ttir","HjÃ¡lmar Dam"],
    crew:["Michael Koba","Thomas Koba","JÃ³nfinn Stenberg","Hans Petur Hansen","Anna Kristin BÃ¦k","Ronni Poulsen","Julia Jacobsen"],
    call:null
  },

  /* 19.10 Flashback 4 â€“ Ruth flirter med tjener */
  {
    id:"2025-10-19",
    title:'SÃ¸ndag 19. okt. Â· â€œFlashback 4 â€“ Ruth flirter med tjenerâ€',
    location:'Hotel Brandan â€“ Rest. HÃºsagarÃ°ur & kÃ¸kken',
    program:[
      ["14:00","Lys, instruktÃ¸r og producer mÃ¸der (Hans Petur, Thomas, Michael)"],
      ["14:45","Props & design mÃ¸der. Skuespillere mÃ¸der (make-up TBC)"],
      ["16:00","Optagelse begynder"],
      ["18:30","SLUT"],
    ],
    scenes:[
      // Ikke specificeret i dok â€“ kan tilfÃ¸jes.
    ],
    cast:["Elsa Maria MagnusardÃ³ttir Olsen","TÃ³rur Ãrnastein","Jaspur JÃ¸rgensen"],
    crew:["Michael Koba","Thomas Koba","Hans Petur Hansen","Anna Kristin BÃ¦k"],
    call:null
  },

  /* 21.10 Esther hjemme-scene */ /* Scener fra v1.8 (10).docx */
  {
    id:"2025-10-21",
    title:'Tirsdag 21. okt. Â· â€œEsther hjemme-sceneâ€',
    location:'Dr. DahlsgÃ¸ta 15, TÃ³rshavn',
    program:[
      ["15:00","Crew mÃ¸der (Hans Petur, Thomas, Ronni, GuÃ°run)"],
      ["15:30","Skuespillere mÃ¸der (Aksel Ã­ Botni, Esther). Anna Kristin ordner tÃ¸j"],
      ["15:45","Gennemgang af scene og indstillinger"],
      ["16:15","Julia mÃ¸der (make-up/hÃ¥r) â€“ fri ca. 18:00"],
      ["18:30","Julia fÃ¥r fri"],
      ["19:00","Optagelse starter"],
      ["21:30","SLUT"],
    ],
    scenes:[
      "SovevÃ¦relse â€“ JÃ³hanna og manden i sovevÃ¦relset.",
      "SovevÃ¦relse, endescene â€“ JÃ³hanna og manden.", // :contentReference[oaicite:1]{index=1}
    ],
    cast:["Aksel Ã­ Botni","Esther Ã¡ Fjallinum"],
    crew:["Michael Koba","Thomas Koba","Hans Petur Hansen","Anna Kristin BÃ¦k","Ronni Poulsen","Julia Jacobsen","GuÃ°run Joensen","Katrin Kallsberg"],
    call:null
  },

  /* 01.11 Terapilokale */
  {
    id:"2025-11-01",
    title:'LÃ¸rdag 1. nov. Â· Terapilokale',
    location:'Aulan, Studenterskolen i HoydÃ¸lum',
    program:[
      ["06:00","Alle crew mÃ¸der. BjÃ¸rn & Marius til make-up/tÃ¸j. Props mÃ¸der"],
      ["06:30","HjÃ¡lmar & Elsa til make-up/tÃ¸j"],
      ["07:00","Esther & Hans til make-up/tÃ¸j"],
      ["07:01","Morgenmad (kaffe/te + rundstykker)"],
      ["08:00","Filmoptagelse starter"],
      ["10:30","Pause/kaffe (Props fri 10:30)"],
      ["10:50","Optagelser fortsÃ¦tter"],
      ["12:30","Frokost (gryderet fra Jan)"],
      ["13:15","Optagelser fortsÃ¦tter"],
      ["15:30","Pause/kaffe"],
      ["15:45","Optagelser fortsÃ¦tter"],
      ["19:00","SLUT"],
    ],
    scenes:[
      "Terapisession 01 â€“ intro, Johanna introducerer Holgar; L Ã­ggjas & Danny om â€œbrekaâ€; HÃ¸gni starter dickpic-historien.",
      "Terapisession 02 â€“ HÃ¸gni kort inde; â€œhavde glemt alt om detâ€.", // :contentReference[oaicite:2]{index=2}
    ],
    cast:["Esther Ã¡ Fjallinum","Hans TÃ³rgarÃ°","Elsa Maria MagnusardÃ³ttir Olsen","HjÃ¡lmar Dam","Marius DC","BjÃ¸rn Simonsen Ulvedal"],
    crew:["Michael Koba","Thomas Koba","JÃ³nfinn Stenberg","Hans Petur Hansen","Anna Kristin BÃ¦k","HÃ¸gni Fagraberg","Julia Jacobsen"],
    call:null
  },

  /* 02.11 Terapilokale (fortsat) */
  {
    id:"2025-11-02",
    title:'SÃ¸ndag 2. nov. Â· Terapilokale (fortsat)',
    location:'Aulan, Studenterskolen i HoydÃ¸lum',
    program:[["08:00","Optagelser fortsÃ¦tter (rytme som 1. nov.)"]],
    scenes:[
      "Terapisession 03 â€“ Ruth viser dickpic-billede; HÃ¸gni om bÃ¸rn & selvmord; L Ã­ggjas nÃ¦ste; Danny driller.",
      "Terapisession 04 â€“ L Ã­ggjas benÃ¦gter at kunne krÃ¦nke; Holgar bryder ind; Danny starter sin historie.", // :contentReference[oaicite:3]{index=3}
    ],
    cast:["Esther Ã¡ Fjallinum","Hans TÃ³rgarÃ°","Elsa Maria MagnusardÃ³ttir Olsen","HjÃ¡lmar Dam","Marius DC","BjÃ¸rn Simonsen Ulvedal"],
    crew:["Michael Koba","Thomas Koba","JÃ³nfinn Stenberg","Hans Petur Hansen","Anna Kristin BÃ¦k","HÃ¸gni Fagraberg","Julia Jacobsen"],
    call:null
  },

  /* 07.11 Chef kontor */
  {
    id:"2025-11-07",
    title:'Fredag 7. nov. Â· â€œChef kontorâ€',
    location:'Studenterskolen i HoydÃ¸lum',
    program:[
      ["10:00","GuÃ°run designer rummet som kontor (aftale med instruktÃ¸r/producer)"],
      ["13:00","Crew mÃ¸der (Hans Petur, Thomas, Ronni, Anna Kristin)"],
      ["14:15","Skuespillere mÃ¸der (Esther, Hans, Thora). Make-up & kostume"],
      ["16:00","Optagelse starter"],
      ["18:00","Pause (sandwich)"],
      ["18:30","Optagelse fortsÃ¦tter"],
      ["20:30","SLUT"],
    ],
    scenes:[
      // Ikke specificeret i dok â€“ kan tilfÃ¸jes.
    ],
    cast:["Esther Ã¡ Fjallinum","Hans TÃ³rgarÃ°","Thora Augustinussen"],
    crew:["Michael Koba","Thomas Koba","Hans Petur Hansen","Anna Kristin BÃ¦k","Ronni Poulsen","Julia Jacobsen","GuÃ°run Joensen"],
    call:null
  },

  /* 10.11 KÃ¸re-scener + parkering (Ã¦ndret fra 8/11) */
  {
    id:"2025-11-10",
    title:'Mandag 10. nov. Â· â€œKÃ¸re scener og parkering sceneâ€',
    location:'Studenterskolen i HoydÃ¸lum',
    program:[
      ["13:00","Crew mÃ¸der (Hans Petur, Thomas, Ronni, Anna Kristin)"],
      ["13:15","Skuespillere mÃ¸der (Esther, Hans, Politi 1 (uniform) + Civil politibetjent)"],
      ["13:15â€“14:15","Make-up gÃ¸r skuespillere klar (Julia)"],
      ["14:15","Optagelse starter"],
      ["18:00","SLUT"],
    ],
    scenes:[
      // Ikke specificeret i dok â€“ kan tilfÃ¸jes.
    ],
    cast:["Esther Ã¡ Fjallinum","Hans TÃ³rgarÃ°","Thora Augustinussen","Politibetjent A","Civil politibetjent"],
    crew:["Michael Koba","Thomas Koba","Hans Petur Hansen","Anna Kristin BÃ¦k","Ronni Poulsen","Julia Jacobsen"],
    call:null
  },

  /* 22.11 Terapilokale */
  {
    id:"2025-11-22",
    title:'LÃ¸rdag 22. nov. Â· Terapilokale',
    location:'Aulan, Studenterskolen i HoydÃ¸lum',
    program:[
      ["06:00","Alle crew mÃ¸der. BjÃ¸rn & Marius til make-up/tÃ¸j. Props mÃ¸der"],
      ["06:30","HjÃ¡lmar & Elsa til make-up/tÃ¸j"],
      ["07:00","Esther & Hans til make-up/tÃ¸j"],
      ["07:01","Morgenmad"],
      ["08:00","Filmoptagelse starter"],
      ["10:30","Pause/kaffe"],
      ["10:50","Optagelser fortsÃ¦tter"],
      ["12:30","Frokost"],
      ["13:15","Optagelser fortsÃ¦tter"],
      ["15:30","Pause/kaffe"],
      ["18:00","SLUT"],
    ],
    scenes:[
      "Terapisession 05 â€“ Ruths monolog; Holgar â€œAlt handler om sex/magtâ€; konfrontation; Johanna mentorscene m.m.", // :contentReference[oaicite:4]{index=4}
    ],
    cast:["Esther Ã¡ Fjallinum","Hans TÃ³rgarÃ°","Elsa Maria MagnusardÃ³ttir Olsen","HjÃ¡lmar Dam","Marius DC","BjÃ¸rn Simonsen Ulvedal"],
    crew:["Michael Koba","Thomas Koba","JÃ³nfinn Stenberg","Hans Petur Hansen","Anna Kristin BÃ¦k","HÃ¸gni Fagraberg","Julia Jacobsen"],
    call:null
  },

  /* 23.11 Terapilokale (fortsat) */
  {
    id:"2025-11-23",
    title:'SÃ¸ndag 23. nov. Â· Terapilokale (fortsat)',
    location:'Aulan, Studenterskolen i HoydÃ¸lum',
    program:[
      ["08:00","Optagelser fortsÃ¦tter (session 5 fortsÃ¦ttes)"],
      ["18:00","SLUT (forventet)"],
    ],
    scenes:[
      "Terapisession 05 fortsat â€“ Holgar konfronterer alle; opsummering; Johanna fanger Holgar pÃ¥ magt.", // :contentReference[oaicite:5]{index=5}
    ],
    cast:["Esther Ã¡ Fjallinum","Hans TÃ³rgarÃ°","Elsa Maria MagnusardÃ³ttir Olsen","HjÃ¡lmar Dam","Marius DC","BjÃ¸rn Simonsen Ulvedal"],
    crew:["Michael Koba","Thomas Koba","JÃ³nfinn Stenberg","Hans Petur Hansen","Anna Kristin BÃ¦k","HÃ¸gni Fagraberg","Julia Jacobsen"],
    call:null
  },

  /* 24.11 Flashback 3B â€“ Kaffemaskine */ /* Scener fra dok v1.7/1.8 */
  {
    id:"2025-11-24",
    title:'Mandag 24. nov. Â· â€œFlashback 3B â€“ Kaffemaskine sceneâ€',
    location:'Tjarnir (Presselogen + mÃ¸derum)',
    program:[
      ["15:00","Crew gÃ¸r kaffemaskine-scenen klar (Hans Petur, Thomas, Michael)"],
      ["15:00","Lyd, stylist & make-up, LM, props & design mÃ¸der (Ronni, Julia, GuÃ°run, Anna Kristin)"],
      ["16:00","Statister + hovedskuespiller til make-up/tÃ¸j (Helena, Ukendt kvindelig statist, HjÃ¡lmar Dam)"],
      ["17:00","Optagelse starter"],
      ["20:00","SLUT"],
    ],
    scenes:[
      "Kantinen ved HÃ¸gni â€“ han henter kaffe.",
      "HÃ¸gni leverer smarte bemÃ¦rkninger til de to ved kaffemaskinen.",
      "MÃ¸derum â€“ HÃ¸gni bliver opsagt.",
      "HÃ¸gni og to HR-folk taler om dickpicks.", // :contentReference[oaicite:6]{index=6}
    ],
    cast:["Helena","Ukendt kvindelig statist","HjÃ¡lmar Dam"],
    crew:["Michael Koba","Thomas Koba","JÃ³nfinn Stenberg","Anna Kristin BÃ¦k","Ronni Poulsen","Julia Jacobsen","GuÃ°run Joensen"],
    call:null
  }
];

/* -------------------- KONTAKTER (uddrag â€“ v1.8) -------------------- */ // :contentReference[oaicite:7]{index=7}
const CONTACTS = {
  // Cast
  "Esther Ã¡ Fjallinum":{role:"Skuespiller Â· Johanna", email:"estherafjallinum@gmail.com", phone:"265069"},
  "Hans TÃ³rgarÃ°":{role:"Skuespiller Â· Holgar", email:"hanstorgar@gmail.com", phone:"229342"},
  "Elsa Maria MagnusardÃ³ttir Olsen":{role:"Skuespiller Â· Ruth", email:"emmocontact@gmail.com", phone:"507104"},
  "HjÃ¡lmar Dam":{role:"Skuespiller Â· HÃ¸gni", email:"helmetsdam@gmail.com", phone:"512449"},
  "Marius DC":{role:"Skuespiller Â· Danny", email:"mariusdamchr@gmail.com", phone:"582161"},
  "BjÃ¸rn Simonsen Ulvedal":{role:"Skuespiller Â· LÃ­ggjas", email:"bjorn.simonsen@gmail.com", phone:"222867"},
  "Aksel Ã­ Botni":{role:"Skuespiller Â· Lars", email:"akselbot@hotmail.dk", phone:"+298220265"},
  "Thora Augustinussen":{role:"Skuespiller Â· Chefen/Receptionist", email:"ta@faer.fo"},
  "TÃ³rur viÃ° Ãir":{role:"Statist Â· Advokat 1", email:"torur_air@outlook.com", phone:"239403"},
  "AstriÃ° GullborgardÃ³ttir":{role:"Statist Â· Advokat 2", email:"gullborgardottir@gmail.com", phone:"504467"},
  "TÃ³rur Ãrnastein":{role:"Skuespiller Â· Kok 2", email:"torurarnastein@gmail.com", phone:"266858"},
  "Jaspur JÃ¸rgensen":{role:"Skuespiller Â· Kok 1", email:"jj@hotelbrandan.fo", phone:"227570"},
  "Helena":{role:"Statist Â· Girl 1", email:"helena.h.jorgensen@gmail.com"},
  "Ukendt kvindelig statist":{role:"Statist Â· Girl 2"},
  "Politibetjent A":{role:"Politi (uniform)"},
  "Civil politibetjent":{role:"Politi (civil)"},
  // Crew & locations
  "Michael Koba":{role:"Producer", email:"mk@fixer.fo", phone:"591011"},
  "Thomas Koba":{role:"InstruktÃ¸r / A-foto", email:"thomas@kovboyfilm.com", phone:"213457"},
  "JÃ³nfinn Stenberg":{role:"B-fotograf", email:"jonfinn_stenberg@hotmail.com", phone:"296682"},
  "Hans Petur Hansen":{role:"Lys", email:"hph@kvf.fo", phone:"296652"},
  "Anna Kristin BÃ¦k":{role:"Props & design", email:"kristin.baek@gmail.com", phone:"265180"},
  "HÃ¸gni Fagraberg":{role:"Lyd", email:"h.fagraberg@gmail.com"},
  "Ronni Poulsen":{role:"Lyd", email:"ronni.poulsen@gmail.com", phone:"794141"},
  "Julia Jacobsen":{role:"Make-up", email:"juliajacobsen@outlook.com", phone:"251175"},
  "GuÃ°run Joensen":{role:"Location manager", email:"gudrunjoensen@gmail.com", phone:"548747"},
  "Katrin Kallsberg":{role:"Location ejer Â· Dr. DahlsgÃ¸ta 15", email:"katrinkallsberg@gmail.com", phone:"218208"},
  "Petur HÃ¡berg":{role:"Location ejer Â· HvarviÃ° 3, kj.", phone:"213090"}
};

/* Udledte navne til dropdown */
const PEOPLE = Array.from(new Set([
  ...Object.keys(CONTACTS),
  ...DAYS.flatMap(d => [...d.cast, ...d.crew])
])).sort((a,b)=>a.localeCompare(b,'da'));

/* -------------------- DOM helpers & INIT -------------------- */
const el = id => document.getElementById(id);
let currentDay = null;

function init(){
  const sel = el('nameSelect');
  for(const p of PEOPLE){
    const o = document.createElement('option'); o.value=p; o.textContent=p; sel.appendChild(o);
  }
  renderDayList();
}
init();

/* -------------------- UI base -------------------- */
function resetUI(){
  el('nameSelect').value="";
  renderMySchedule();
  currentDay = null;
  el('dayTitle').textContent = 'VÃ¦lg en dag i hÃ¸jre side';
  el('dayMeta').innerHTML = '';
  el('program').innerHTML = '';
  el('scenes').innerHTML = '';
  el('cast').innerHTML = '';
  el('crew').innerHTML = '';
  el('callInfo').innerHTML = '<div class="muted">Ingen fil knyttet.</div>';
  renderDayList();
  window.scrollTo({top:0,behavior:'smooth'});
}

/* -------------------- Dagsliste (hÃ¸jre) -------------------- */
function renderDayList(){
  const q = (el('daySearch').value||'').toLowerCase();
  const list = el('dayList'); list.innerHTML = '';
  const days = [...DAYS].sort((a,b)=>a.id.localeCompare(b.id));
  days.forEach(d=>{
    if(q && !(d.title.toLowerCase().includes(q) || d.location.toLowerCase().includes(q))) return;
    const div = document.createElement('div');
    div.className='item';
    div.innerHTML = `
      <div>
        <div><strong>${d.title}</strong></div>
        <div class="muted">${d.location}</div>
      </div>
      <span class="tag">Se program</span>`;
    div.onclick = ()=>showDay(d.id);
    list.appendChild(div);
  });
}

/* -------------------- Dagvisning -------------------- */
function showDay(dayId){
  const d = DAYS.find(x=>x.id===dayId); if(!d) return;
  currentDay = d.id;
  el('dayTitle').textContent = d.title;
  el('dayMeta').innerHTML = `
    <span class="pill">Location: ${d.location}</span>
    <span class="pill">Skuespillere: ${d.cast.length}</span>
    <span class="pill">Crew: ${d.crew.length}</span>`;
  const prog = el('program'); prog.innerHTML='';
  if(!d.program?.length){ prog.innerHTML = '<div class="empty">Intet program registreret.</div>'; }
  else{
    d.program.forEach(([t,desc])=>{
      const row = document.createElement('div');
      row.className='step';
      row.innerHTML = `<time class="tag">${t}</time><div>${desc}</div>`;
      prog.appendChild(row);
    });
  }

  const sc = el('scenes'); sc.innerHTML='';
  if(!d.scenes?.length){ sc.innerHTML = '<div class="muted">Ingen scener registreret.</div>'; }
  else{
    d.scenes.forEach((s,i)=>{
      const div=document.createElement('div');
      div.className='step';
      div.innerHTML = `<span class="tag">Scene ${String(i+1).padStart(2,'0')}</span><div>${s}</div>`;
      sc.appendChild(div);
    });
  }

  el('cast').innerHTML = d.cast.length ? d.cast.map(n=>`<span class="chip" title="${contactTip(n)}">${n}</span>`).join('') : '<div class="muted">â€“</div>';
  el('crew').innerHTML = d.crew.length ? d.crew.map(n=>`<span class="chip" title="${contactTip(n)}">${n}</span>`).join('') : '<div class="muted">â€“</div>';
  el('callInfo').innerHTML = d.call ? `<a href="${d.call}" target="_blank" download>ðŸ“„ Ã…bn call sheet</a>` : '<div class="muted">Ingen fil knyttet.</div>';
  if(window.innerWidth<1100){ document.querySelector('.center').scrollIntoView({behavior:'smooth'}); }
}

/* -------------------- Mit skema -------------------- */
function renderMySchedule(){
  const name = el('nameSelect').value;
  const box = el('mySchedule'); box.innerHTML='';
  if(!name){ box.innerHTML = '<div class="empty">VÃ¦lg dit navn for at se dine arbejdsdage.</div>'; return; }
  const mine = [...DAYS].sort((a,b)=>a.id.localeCompare(b.id)).filter(d => d.cast.includes(name) || d.crew.includes(name));
  if(!mine.length){ box.innerHTML = '<div class="empty">Ingen dage fundet for denne person.</div>'; return; }
  mine.forEach(d=>{
    const div = document.createElement('div');
    div.className='item';
    div.innerHTML = `
      <div>
        <div><strong>${d.title}</strong></div>
        <div class="muted">${d.location}</div>
      </div>
      <button class="daybtn">Ã…bn</button>`;
    div.onclick = ()=>showDay(d.id);
    box.appendChild(div);
  });
}

/* -------------------- Kontakter -------------------- */
function openContacts(){ el('contactsModal').style.display='flex'; renderContacts(); }
function closeContacts(){ el('contactsModal').style.display='none'; }
function renderContacts(){
  const q = (el('contactSearch').value||'').toLowerCase();
  const root = el('contactsList'); root.innerHTML='';
  const rows = Object.entries(CONTACTS)
    .filter(([name,c])=>{
      const hay = [name,c.role||'',c.email||'',c.phone||''].join(' ').toLowerCase();
      return !q || hay.includes(q);
    })
    .sort((a,b)=>a[0].localeCompare(b[0],'da'));
  if(!rows.length){ root.innerHTML='<div class="empty">Ingen kontakter matcher.</div>'; return; }
  rows.forEach(([name,c])=>{
    const div = document.createElement('div');
    div.className='contact-row';
    const role = c.role? `<div class="muted">${c.role}</div>` : '';
    const mail = c.email? `<a href="mailto:${c.email}">${c.email}</a>` : '<span class="muted">â€”</span>';
    const tel  = c.phone? `<a href="tel:${c.phone}">${c.phone}</a>` : '<span class="muted">â€”</span>';
    div.innerHTML = `<div><div><strong>${name}</strong></div>${role}</div><div style="text-align:right"><div>${mail}</div><div>${tel}</div></div>`;
    root.appendChild(div);
  });
}

/* -------------------- Call sheets (samlet liste) -------------------- */
function openCallSheets(){ el('callSheetsModal').style.display='flex'; renderCallSheets(); }
function closeCallSheets(){ el('callSheetsModal').style.display='none'; }
function renderCallSheets(){
  const q = (el('callSearch').value||'').toLowerCase();
  const root = document.getElementById('callSheetsList'); root.innerHTML='';
  const days = [...DAYS].sort((a,b)=>a.id.localeCompare(b.id));
  days.forEach(d=>{
    const hay = [d.id, d.title, d.location, ...(d.scenes||[]), ...d.cast, ...d.crew, ...(d.program?.flat()||[])].join(' ').toLowerCase();
    if(q && !hay.includes(q)) return;
    const sheet = document.createElement('div');
    sheet.className='sheet';
    sheet.style.border='1px solid var(--border)';
    sheet.style.borderRadius='12px';
    sheet.style.padding='16px';
    sheet.style.background='#111521';
    sheet.innerHTML = `
      <div class="kicker">${d.id}</div>
      <h2 style="margin:.25rem 0 0 0">${d.title}</h2>
      <div class="chips" style="margin:.5rem 0 1rem 0">
        <span class="pill">Location: ${d.location}</span>
        <span class="pill">Scener: ${d.scenes?.length||0}</span>
        <span class="pill">Skuespillere: ${d.cast.length}</span>
        <span class="pill">Crew: ${d.crew.length}</span>
        ${d.call ? `<a class="pill" href="${d.call}" target="_blank">Eksternt call sheet</a>` : `<span class="pill">Ingen ekstern fil</span>`}
      </div>
      <div class="section">
        <h3>Program</h3>
        <div class="program">
          ${ (d.program&&d.program.length)
              ? d.program.map(([t,desc])=>`<div class="step"><time class="tag">${t}</time><div>${desc}</div></div>`).join('')
              : '<div class="muted">Intet program registreret.</div>' }
        </div>
      </div>
      <div class="section">
        <h3>Scener</h3>
        <div class="program">
          ${ (d.scenes&&d.scenes.length)
              ? d.scenes.map((s,i)=>`<div class="step"><span class="tag">Scene ${String(i+1).padStart(2,'0')}</span><div>${s}</div></div>`).join('')
              : '<div class="muted">Ingen scener registreret.</div>' }
        </div>
      </div>
      <div class="section grid">
        <div><h3>Skuespillere</h3><div class="chips">${ d.cast.length ? d.cast.map(n=>`<span class="chip" title="${contactTip(n)}">${n}</span>`).join('') : '<div class="muted">â€“</div>' }</div></div>
        <div><h3>Crew</h3><div class="chips">${ d.crew.length ? d.crew.map(n=>`<span class="chip" title="${contactTip(n)}">${n}</span>`).join('') : '<div class="muted">â€“</div>' }</div></div>
      </div>`;
    root.appendChild(sheet);
  });
  if(!root.children.length){ root.innerHTML = '<div class="empty">Ingen dage matcher din sÃ¸gning.</div>'; }
}

/* Helper */
function contactTip(name){
  const c = CONTACTS[name]; if(!c) return '';
  const bits = [c.role, c.email, c.phone].filter(Boolean);
  return bits.join(' Â· ');
}
</script>
</body>
</html>
